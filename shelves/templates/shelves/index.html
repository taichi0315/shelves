{% extends "shelves/base.html" %}
{% load staticfiles%}
{% load humanize %}

{% block content %}
<p><div class="text-right">
    {% if not user.is_authenticated %}
        <p><a href="{% url 'shelves:login' %}">ログイン</a>または<a href="{% url 'shelves:signup' %}">サインアップ</a></p>
    {% endif %}
</div></p>

<div class="container">
    <div class="row row-eq-height p-2">
        {% for post in posted_list %}
        <div class="card col-sm-6 p-2">
            <div class="row">
                <div class="col-sm-4">
                    <div class="d-flex flex-column justify-content-center"><a href="{% url 'shelves:book_detail' post.Book.pk %}"><img class="card-img-top mh-100" src="{{ post.Book.cover_url }}"/></a></div>
                </div>
                <div class="col-sm-8 p-3 card-body d-flex flex-column">
                    <div class="card-title h5">{{ post.title | linebreaksbr }}</div>
                    <div>{{ post.created_by.displayname }}<a href="{% url 'shelves:profile' post.created_by.username %}">@{{ post.created_by.username }}</a> {{ post.created_at | naturaltime}}</div>
                    <div class="card-text">
                        <div>評価：{{ post.rating }}</div>
                        <div class="text-truncate text-wrap">{{ post.comment | linebreaksbr }}</div>
                    </div>
                    <div class="align-self-end">
                        <a class="card-link" href="{% url 'shelves:post_detail' post.id%}">詳しく読む</a>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="p-4">投稿がありません</p>
        {% endfor %}
    </div>
</div>

{% endblock %}